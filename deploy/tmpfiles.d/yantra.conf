# YantraOS â€” systemd-tmpfiles directory provisioning
# Target: /usr/lib/tmpfiles.d/yantra.conf
# Consumed by: systemd-tmpfiles --create (runs at boot)
#
# Creates runtime and persistent directories with strict ownership.

# Volatile IPC socket directory (cleared on reboot)
d /run/yantra 0770 yantra_daemon yantra -

# Persistent Python venv (root-owned, one-way execution barrier)
d /opt/yantra/venv 0755 root root -

# ChromaDB persistent storage with BTRFS nodatacow (+C)
# The +C attribute prevents copy-on-write fragmentation and
# write amplification on BTRFS filesystems.
d /var/lib/yantra/chroma 0770 yantra_daemon yantra -
H /var/lib/yantra/chroma - - - - +C
